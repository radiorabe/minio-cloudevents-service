{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"MinIO CloudEvents Service","text":"<p>MinIO CloudEvents Service consumes MinIO events from a Kafka topic in S3/MinIO format and then converts them to CloudEvents and sends them to a <code>cloudevents</code> topic in Kafka.</p>"},{"location":"#usage","title":"Usage","text":"<p>Run the container to see all available configuration options and their corresponding environment variables.</p> <pre><code>podman run --rm ghcr.io/radiorabe/minioevents:latest --help\n</code></pre>"},{"location":"#development","title":"Development","text":"<pre><code>python -mvenv venv\n. venv/bin/activate\n\npip install poetry\npoetry install\n\npytest\n</code></pre>"},{"location":"#release-management","title":"Release Management","text":"<p>The CI/CD setup uses semantic commit messages following the conventional commits standard. The workflow is based on the RaBe shared actions and uses go-semantic-commit to create new releases.</p> <p>The commit message should be structured as follows:</p> <pre><code>&lt;type&gt;[optional scope]: &lt;description&gt;\n\n[optional body]\n\n[optional footer(s)]\n</code></pre> <p>The commit contains the following structural elements, to communicate intent to the consumers of your library:</p> <ol> <li>fix: a commit of the type <code>fix</code> patches gets released with a PATCH version bump</li> <li>feat: a commit of the type <code>feat</code> gets released as a MINOR version bump</li> <li>BREAKING CHANGE: a commit that has a footer <code>BREAKING CHANGE:</code> gets released as a MAJOR version bump</li> <li>types other than <code>fix:</code> and <code>feat:</code> are allowed and don't trigger a release</li> </ol> <p>If a commit does not contain a conventional commit style message you can fix it during the squash and merge operation on the PR.</p>"},{"location":"#build-process","title":"Build Process","text":"<p>The CI/CD setup uses Docker build-push Action  to publish container images. The workflow is based on the RaBe shared actions.</p>"},{"location":"#license","title":"License","text":"<p>This application is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, version 3 of the License.</p>"},{"location":"#copyright","title":"Copyright","text":"<p>Copyright (c) 2023 Radio Bern RaBe</p>"},{"location":"reference/SUMMARY/","title":"SUMMARY","text":"<ul> <li>minioevents</li> </ul>"},{"location":"reference/minioevents/","title":"minioevents","text":""},{"location":"reference/minioevents/#minioevents.from_consumer_record","title":"<code>from_consumer_record(msg)</code>","text":"<p>naive implementation of https://github.com/cloudevents/spec/blob/main/cloudevents/adapters/aws-s3.md</p> Source code in <code>minioevents.py</code> <pre><code>def from_consumer_record(msg: ConsumerRecord) -&gt; [CloudEvent]:\n\"\"\"\n    naive implementation of https://github.com/cloudevents/spec/blob/main/cloudevents/adapters/aws-s3.md\n    \"\"\"\nfor rec in json.loads(msg.value).get(\"Records\", []):\nyield CloudEvent(\n{\n\"id\": \".\".join(\n[\nrec.get(\"responseElements\", {}).get(\"x-amz-request-id\"),\nrec.get(\"responseElements\", {}).get(\"x-amz-id-2\"),\n]\n),\n\"source\": \".\".join(\n[\nrec.get(\"eventSource\"),\nrec.get(\"awsRegion\"),\nrec.get(\"s3\", {}).get(\"bucket\", {}).get(\"name\"),\n]\n),\n\"specversion\": \"1.0\",\n\"type\": \".\".join(\n[\n\"com.amazonaws.s3\",\nrec.get(\"eventName\"),\n]\n),\n\"datacontenttype\": \"application/json\",\n\"subject\": rec.get(\"s3\", {}).get(\"object\", {}).get(\"key\"),\n\"time\": rec.get(\"eventTime\"),\n},\nrec,\n)\n</code></pre>"}]}